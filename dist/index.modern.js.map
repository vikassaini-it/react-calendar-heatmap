{"version":3,"file":"index.modern.js","sources":["../lib/components/CalendarHeatmap/Calendar.heatmap.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\n// import styles from \"./Calendar.heatmap.css\";\n\nconst CalendarHeatmap = (props) => {\n    // return <div className={styles[\"techo-wrap\"]}>Helloo</div>;\n\n    const { dataValues } = props;\n\n    // Date Range Shown\n    const [endDate, setEndDate] = useState(new Date());\n    const [startDate, setStartDate] = useState(new Date());\n\n    // Year based on date range\n    const [startYear, setStartYear] = useState(2023);\n    const [endYear, setEndYear] = useState(2024);\n\n    // Grid calculated based on date range\n    const [calenderGrid, setCalendarGrid] = useState([]);\n    const [highestValue, setHighestValue] = useState(-Infinity);\n\n    useEffect(() => {\n        calculateRange();\n        calculateHighestValue();\n    }, [dataValues]);\n\n    useEffect(() => {\n        calculateCalendarGrid();\n        console.log(\"GG\");\n    }, [startDate, endDate]);\n\n    const calculateCalendarGrid = () => {\n        console.log(\"TT\");\n        const days =\n            Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24)) + 1;\n        setCalendarGrid(\n            Array.from({ length: days }, (_, i) => {\n                const date = new Date(startDate);\n                date.setDate(startDate.getDate() + i);\n                return date.toISOString().slice(0, 10);\n            })\n        );\n    };\n\n    const calculateRange = () => {\n        let edt = props.endDate ?? new Date();\n        let sdt = props.startDate ?? new Date();\n        sdt.setFullYear(sdt.getFullYear() - 1);\n        setEndDate(edt);\n        setStartDate(sdt);\n        setEndYear(edt.getFullYear());\n        setStartYear(sdt.getFullYear());\n    };\n\n    const calculateHighestValue = () => {\n        setHighestValue(\n            dataValues?.reduce((a, b) => Math.max(a, b.count), -Infinity)\n        );\n    };\n\n    const getIntensity = (activityCount) => {\n        return highestValue !== 0\n            ? Number(activityCount / highestValue) * 100\n            : 0;\n    };\n\n    const getColor = (intensity) => {\n        const color = props.color ?? \"#D2042D\";\n        if (intensity !== null && intensity !== undefined) {\n            if (intensity < 15) intensity = 15;\n            return `${color}${intensity}`;\n        } else return color;\n    };\n\n    const moveYear = (direction) => {\n        let sdt = new Date(startDate);\n        let edt = new Date(endDate);\n        sdt.setFullYear(sdt.getFullYear() + direction);\n        edt.setFullYear(edt.getFullYear() + direction);\n        setEndDate(edt);\n        setStartDate(sdt);\n        setEndYear(edt.getFullYear());\n        setStartYear(sdt.getFullYear());\n    };\n\n    return (\n        <div style={{ padding: \"20px\" }}>\n            <div\n                style={{\n                    display: \"grid\",\n                    gridAutoFlow: \"column\",\n                    gridTemplateRows: \"repeat(7, minmax(0, 1fr)\",\n                    gap: \"6px\",\n                }}\n            >\n                {calenderGrid.map((day, index) => {\n                    const target = dataValues.find((item) => item.date === day);\n                    const activityCount = target?.count || 0;\n                    const data = target?.data || [];\n                    data.reverse();\n                    const intensity = getIntensity(activityCount);\n                    const color = getColor(intensity);\n                    return (\n                        <div\n                            className=\"w-4 h-4 rounded cursor-pointer\"\n                            title={`${activityCount} Posts on ${day}`}\n                            key={index}\n                            style={{\n                                width: \"10px\",\n                                height: \"10px\",\n                                backgroundColor: `${\n                                    activityCount == 0\n                                        ? \"#00000010\"\n                                        : String(color)\n                                }`,\n                                borderRadius: \"100%\",\n                                transition: \"background-color 200ms linear\",\n                            }}\n                        ></div>\n                    );\n                })}\n            </div>\n            <div\n                style={{\n                    width: \"100%\",\n                    display: \"flex\",\n                    justifyContent: \"space-between\",\n                    margin: \"15px 5px\",\n                }}\n            >\n                <div style={{ display: \"flex\", alignItems: \"center\" }}>\n                    <div\n                        style={{\n                            fontSize: \"26px\",\n                            color: getColor(),\n                            cursor: \"pointer\",\n                        }}\n                        onClick={() => {\n                            moveYear(-1);\n                        }}\n                    >\n                        ⇦\n                    </div>\n                    &nbsp;\n                    <div>{startYear}</div>\n                </div>\n                <div style={{ display: \"flex\", alignItems: \"center\" }}>\n                    <div>{endYear}</div>\n                    &nbsp;\n                    <div\n                        style={{\n                            fontSize: \"26px\",\n                            color: getColor(),\n                            cursor: \"pointer\",\n                        }}\n                        onClick={() => {\n                            moveYear(1);\n                        }}\n                    >\n                        ⇨\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default CalendarHeatmap;\n"],"names":["CalendarHeatmap","props","dataValues","endDate","setEndDate","useState","Date","startDate","setStartDate","startYear","setStartYear","endYear","setEndYear","calenderGrid","setCalendarGrid","highestValue","setHighestValue","Infinity","useEffect","calculateRange","calculateHighestValue","calculateCalendarGrid","console","log","days","Math","ceil","Array","from","length","_","i","date","setDate","getDate","toISOString","slice","edt","sdt","setFullYear","getFullYear","reduce","a","b","max","count","getIntensity","activityCount","Number","getColor","intensity","color","undefined","moveYear","direction","React","createElement","style","padding","display","gridAutoFlow","gridTemplateRows","gap","map","day","index","target","find","item","data","reverse","className","title","key","width","height","backgroundColor","String","borderRadius","transition","justifyContent","margin","alignItems","fontSize","cursor","onClick"],"mappings":"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"}
{"version":3,"file":"index.js","sources":["../lib/components/CalendarHeatmap/Calendar.heatmap.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\n// import styles from \"./Calendar.heatmap.css\";\n\nconst CalendarHeatmap = (props) => {\n    // return <div className={styles[\"techo-wrap\"]}>Helloo</div>;\n\n    const { dataValues } = props;\n\n    // Date Range Shown\n    const [endDate, setEndDate] = useState(new Date());\n    const [startDate, setStartDate] = useState(new Date());\n\n    // Year based on date range\n    const [startYear, setStartYear] = useState(2023);\n    const [endYear, setEndYear] = useState(2024);\n\n    // Grid calculated based on date range\n    const [calenderGrid, setCalendarGrid] = useState([]);\n    const [highestValue, setHighestValue] = useState(-Infinity);\n\n    useEffect(() => {\n        calculateRange();\n        calculateHighestValue();\n    }, [dataValues]);\n\n    useEffect(() => {\n        calculateCalendarGrid();\n        console.log(\"GG\");\n    }, [startDate, endDate]);\n\n    const calculateCalendarGrid = () => {\n        console.log(\"TT\");\n        const days =\n            Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24)) + 1;\n        setCalendarGrid(\n            Array.from({ length: days }, (_, i) => {\n                const date = new Date(startDate);\n                date.setDate(startDate.getDate() + i);\n                return date.toISOString().slice(0, 10);\n            })\n        );\n    };\n\n    const calculateRange = () => {\n        let edt = props.endDate ?? new Date();\n        let sdt = props.startDate ?? new Date();\n        sdt.setFullYear(sdt.getFullYear() - 1);\n        setEndDate(edt);\n        setStartDate(sdt);\n        setEndYear(edt.getFullYear());\n        setStartYear(sdt.getFullYear());\n    };\n\n    const calculateHighestValue = () => {\n        setHighestValue(\n            dataValues?.reduce((a, b) => Math.max(a, b.count), -Infinity)\n        );\n    };\n\n    const getIntensity = (activityCount) => {\n        return highestValue !== 0\n            ? Number(activityCount / highestValue) * 100\n            : 0;\n    };\n\n    const getColor = (intensity) => {\n        const color = props.color ?? \"#D2042D\";\n        if (intensity !== null && intensity !== undefined) {\n            if (intensity < 15) intensity = 15;\n            return `${color}${intensity}`;\n        } else return color;\n    };\n\n    const moveYear = (direction) => {\n        let sdt = new Date(startDate);\n        let edt = new Date(endDate);\n        sdt.setFullYear(sdt.getFullYear() + direction);\n        edt.setFullYear(edt.getFullYear() + direction);\n        setEndDate(edt);\n        setStartDate(sdt);\n        setEndYear(edt.getFullYear());\n        setStartYear(sdt.getFullYear());\n    };\n\n    return (\n        <div style={{ padding: \"20px\" }}>\n            <div\n                style={{\n                    display: \"grid\",\n                    gridAutoFlow: \"column\",\n                    gridTemplateRows: \"repeat(7, minmax(0, 1fr)\",\n                    gap: \"6px\",\n                }}\n            >\n                {calenderGrid.map((day, index) => {\n                    const target = dataValues.find((item) => item.date === day);\n                    const activityCount = target?.count || 0;\n                    const data = target?.data || [];\n                    data.reverse();\n                    const intensity = getIntensity(activityCount);\n                    const color = getColor(intensity);\n                    return (\n                        <div\n                            className=\"w-4 h-4 rounded cursor-pointer\"\n                            title={`${activityCount} Posts on ${day}`}\n                            key={index}\n                            style={{\n                                width: \"10px\",\n                                height: \"10px\",\n                                backgroundColor: `${\n                                    activityCount == 0\n                                        ? \"#00000010\"\n                                        : String(color)\n                                }`,\n                                borderRadius: \"100%\",\n                                transition: \"background-color 200ms linear\",\n                            }}\n                        ></div>\n                    );\n                })}\n            </div>\n            <div\n                style={{\n                    width: \"100%\",\n                    display: \"flex\",\n                    justifyContent: \"space-between\",\n                    margin: \"15px 5px\",\n                }}\n            >\n                <div style={{ display: \"flex\", alignItems: \"center\" }}>\n                    <div\n                        style={{\n                            fontSize: \"26px\",\n                            color: getColor(),\n                            cursor: \"pointer\",\n                        }}\n                        onClick={() => {\n                            moveYear(-1);\n                        }}\n                    >\n                        ⇦\n                    </div>\n                    &nbsp;\n                    <div>{startYear}</div>\n                </div>\n                <div style={{ display: \"flex\", alignItems: \"center\" }}>\n                    <div>{endYear}</div>\n                    &nbsp;\n                    <div\n                        style={{\n                            fontSize: \"26px\",\n                            color: getColor(),\n                            cursor: \"pointer\",\n                        }}\n                        onClick={() => {\n                            moveYear(1);\n                        }}\n                    >\n                        ⇨\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default CalendarHeatmap;\n"],"names":["CalendarHeatmap","props","dataValues","_useState","useState","Date","endDate","setEndDate","_useState2","startDate","setStartDate","_useState3","startYear","setStartYear","_useState4","endYear","setEndYear","_useState5","calenderGrid","setCalendarGrid","_useState6","Infinity","highestValue","setHighestValue","useEffect","calculateRange","calculateHighestValue","calculateCalendarGrid","console","log","days","Math","ceil","Array","from","length","_","i","date","setDate","getDate","toISOString","slice","_props$endDate","_props$startDate","edt","sdt","setFullYear","getFullYear","reduce","a","b","max","count","getIntensity","activityCount","Number","getColor","intensity","_props$color","color","undefined","moveYear","direction","React","createElement","style","padding","display","gridAutoFlow","gridTemplateRows","gap","map","day","index","target","find","item","data","reverse","className","title","key","width","height","backgroundColor","String","borderRadius","transition","justifyContent","margin","alignItems","fontSize","cursor","onClick"],"mappings":"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"}
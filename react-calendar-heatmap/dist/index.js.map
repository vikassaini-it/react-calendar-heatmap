{"version":3,"file":"index.js","sources":["../lib/components/CalendarHeatmap/Calendar.heatmap.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\n// import styles from \"./Calendar.heatmap.css\";\n\nconst CalendarHeatmap = (props) => {\n    // return <div className={styles[\"techo-wrap\"]}>Helloo</div>;\n\n    const {dataValues} = props;\n\n    let endDate = new Date();\n    let startDate = new Date();\n    startDate.setFullYear(startDate.getFullYear() - 1);\n\n    let startYear = startDate.getFullYear();\n    let endYear = endDate.getFullYear();\n\n    const [calenderGrid, setCalendarGrid] = useState([]);\n\n    useEffect(() => {\n        calculateCalendarGrid();\n    }, [dataValues]);\n\n    const calculateCalendarGrid = () => {\n        const days =\n            Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24)) + 1;\n        setCalendarGrid(\n            Array.from({ length: days }, (_, i) => {\n                const date = new Date(startDate);\n                date.setDate(startDate.getDate() + i);\n                return date.toISOString().slice(0, 10);\n            })\n        );\n    };\n\n    const calculateRange = () =>{\n        let edt = props[\"endDate\"]?? (new Date());\n        let sdt = props[\"startDate\"](new Date());\n        sdt.setFullYear(sdt.getFullYear() - 1);\n\n\n        \n    }\n\n    const highestValue = dataValues?.reduce(\n        (a, b) => Math.max(a, b.count),\n        -Infinity\n    );\n\n    const getIntensity = (activityCount) => {\n        return highestValue !== 0 ? Number(activityCount / highestValue) : 0;\n    };\n    const getColorFromIntensity = (intensity) => {\n        const colorCodes = [\n            \"#FFEEEE\",\n            \"#FFCCCC\",\n            \"#FFAAAA\",\n            \"#FF8888\",\n            \"#FF6666\",\n            \"#FF4444\",\n        ];\n        const colorIndex = Math.min(\n            Math.floor(intensity * colorCodes.length),\n            colorCodes.length - 1\n        );\n        return colorCodes[colorIndex];\n    };\n    return (\n        <div className=\"p-2\">\n            <div\n                className=\"gap-2\"\n                style={{\n                    display: \"grid\",\n                    gridAutoFlow: \"column\",\n                    gridTemplateRows: \"repeat(7, minmax(0, 1fr)\",\n                }}\n            >\n                {calenderGrid.map((day, index) => {\n                    const target = dataValues.find((item) => item.date === day);\n                    const activityCount = target?.count || 0;\n                    const data = target?.data || [];\n                    data.reverse();\n                    const intensity = getIntensity(activityCount);\n                    const color = getColorFromIntensity(intensity);\n                    return (\n                        <div\n                            className=\"w-4 h-4 rounded cursor-pointer\"\n                            title={`${activityCount} Posts on ${day}`}\n                            style={{\n                                width: \"10px\",\n                                height: \"10px\",\n                                backgroundColor: `${\n                                    activityCount == 0\n                                        ? \"#00000010\"\n                                        : String(color)\n                                }`,\n                            }}\n                        ></div>\n                    );\n                })}\n            </div>\n            <div className=\"w-100 d-flex justify-content-between pt-2\">\n                <div>{startYear}</div>\n                <div>{endYear}</div>\n            </div>\n        </div>\n    );\n};\n\nexport default CalendarHeatmap;\n"],"names":["CalendarHeatmap","props","dataValues","endDate","Date","startDate","setFullYear","getFullYear","startYear","endYear","_useState","useState","calenderGrid","setCalendarGrid","useEffect","calculateCalendarGrid","days","Math","ceil","Array","from","length","_","i","date","setDate","getDate","toISOString","slice","highestValue","reduce","a","b","max","count","Infinity","getIntensity","activityCount","Number","getColorFromIntensity","intensity","colorCodes","colorIndex","min","floor","React","createElement","className","style","display","gridAutoFlow","gridTemplateRows","map","day","index","target","find","item","data","reverse","color","title","width","height","backgroundColor","String"],"mappings":"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"}